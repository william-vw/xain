@prefix dc: <http://purl.org/dc/terms/> .
@prefix e: <http://eulersharp.sourceforge.net/2003/03swap/log-rules#> .
@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix math: <http://www.w3.org/2000/10/swap/math#> .
@prefix pml: <http://provenanceweb.org/ns/pml#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix r: <http://www.w3.org/2000/10/swap/reason#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix string: <http://www.w3.org/2000/10/swap/string#> .
@prefix x: <http://wvw.org/xai#> .
@base <http://wvw.org/xai#> .

#

:recomm0_template rdf:value """<div class="card rounded-0 border-0 mb-0 bg-section">
   <div class="row g-0 text-white">
      <div class="col-sm-12">
         <h5 class="m-3">You are in:<h5>
      </div>
   </div>
</div>

<div class="card rounded-0 border-0 bg-white">
   <div class="row g-0 %s">
      <div class="col-2 text-center">
         <i class="fas %s card-img-top h-100 p-3 ms-2 mt-1 icon-3"></i>
      </div>
      <div class="col-9">
         <div class="card-body">
            <h5 class="card-title pb-1 zone">%s</h5>
            <p class="card-text mb-0 mt-1 zone-text">%s</p>
         </div>
      </div>
   </div>
</div>


<div class="card rounded-0 border-0 my-0 bg-expl">
   <div class="row g-0">
      <div class="col-sm-12">
         <h5 class="m-3 text-white">Because you have:<h5>
      </div>
   </div>
</div>""" .

#
:recomm1_template rdf:value """<div class="card rounded-0 border-0 mb-0 bg-section">
   <div class="row g-0 text-white">
      <div class="col-sm-12">
         <h5 class="m-3">Risk factor:<h5>
      </div>
   </div>
</div>

<div class="card rounded-0 border-0 bg-white">
   <div class="row g-0 align-items-center text-section">
      <div class="col-2 text-center">
         <i class="fas %s card-img-top h-100 p-3 ms-2 mt-1 icon-3"></i>
      </div>
      <div class="col-9">
         <div class="card-body">
            <h3 class="card-title fw-bold">%s<h3>
         </div>
      </div>
   </div>
</div>

<div class="card rounded-0 border-0 my-0 bg-expl">
   <div class="row g-0">
      <div class="col-sm-12">
         <h5 class="m-3 text-white">Relation with COPD:<h5>
      </div>
   </div>
</div>""" .

#
:reason_template rdf:value """<div class="card border-0 mb-2 bg-white">
   <div class="row g-0 align-items-center text-expl"
      onclick="location.href='xyz';"
      style="cursor: pointer">
      <div class="col-2 text-center">
         <i class="fas %s card-img-top h-100 p-3 ms-2 icon-3"></i>
      </div>
      <div class="col-9">
         <div class="card-body">
            <h5 class="card-title mb-0">%s<h5>
         </div>
         <p class="card-content">%s <i class="fas fa-circle-question"></i></p>
      </div>
   </div>
</div>
""" .

#
{
   ?inf x:recommLabel ?label 
}
<= 
{
   ?inf!x:gives!e:labelvars log:includes 
   {
       ?s ?p ?o 
   } .
   (
       {
           ?inf a x:RootNode 
       }
       {
           ?o!log:localN3String x:description ?descr .
           #
           ?p x:explanation [
               # x:object ?o ;
               x:icon ?icon ;
               x:style ?style ;
               x:summary ?summ 
           ] .
           :recomm0_template rdf:value ?template .
           ( ?template ?style ?icon ?descr ?summ ) string:format ?label .
       }
       {
           ?inf x:conclusionStr ?descr .
           #
           ?p x:explanation [
               # x:object ?o ;
               x:icon ?icon 
           ] .
           :recomm1_template rdf:value ?template .
           ( ?template ?icon ?descr ) string:format ?label .
       }
   ) log:ifThenElseIn _:t .
   #
} .


#
{
   ?inf x:reasonLabel ?label 
}
<= 
{
   ?inf!x:gives!e:labelvars log:includes 
   {
       ?s ?p ?o 
   } .
   ?inf x:conclusionStr ?descr .
   #
   ?p x:explanation [
       # x:object ?o ;
       x:icon ?icon ;
       x:summary ?summ 
   ] .
   :reason_template rdf:value ?template .
   ( ?template ?icon ?descr ?summ ) string:format ?label .
} .
